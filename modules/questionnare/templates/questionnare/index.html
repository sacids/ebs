{% extends 'base.html' %}
{% load static %}
{% block title %} Events Based Surveillance Situational analysis questionnaire {% endblock %}

{% block content %}
<!-- Page content -->
<div class="page-content bg-white">
    <div class="container">
        <!-- Main content -->
        <div class="content-wrapper">
            <!-- Content area -->
            <div class="content">
                <!-- Basic card -->
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title text-uppercase text-center font-weight-bold">

                        </h5>
                    </div>
                    <!--./card-header -->

                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-12">
                                {% if categories|length > 0 %}
                                <form action="" method="post">
                                    {% csrf_token %}

                                    {% if messages %}
                                    {% for message in messages %}
                                    <p {% if message.tags %} class="p-2 {{ message.tags }} " {% endif %}>
                                        {{ message }}
                                    </p>
                                    {% endfor %}
                                    {% endif %}

                                    <div class="row">
                                        <div class="col-md-12">
                                            <table class="table table-bordered" width="100%">
                                                <tr>
                                                    <td><b>Supporting Regional Cordinating Centre (RCC)</b></td>
                                                    <td>
                                                        <div class="form-group mb-0">
                                                            <select name="rcc" id="rcc" class="form-control">
                                                                <option value="">--Select--</option>
                                                                <option value="eastern">Eastern RCC</option>
                                                                <option value="western">Western RCC</option>
                                                                <option value="central">Central RCC</option>
                                                                <option value="northen">Northern RCC</option>
                                                                <option value="southern">Southern RCC</option>
                                                            </select>
                                                        </div>
                                                        <!--./form-group-->
                                                    </td>
                                                </tr>

                                                <tr>
                                                    <td width="50%"><b>Name of the Country</b></td>
                                                    <td>
                                                        <div class="form-group mb-0">
                                                            <select name="country" id="country" class="form-control">
                                                                <option value="">--Select --</option>
                                                                {% for country in countries %}
                                                                <option value="{{ country.id}}">
                                                                    {{ country.title}}
                                                                </option>
                                                                {% endfor %}
                                                            </select>
                                                        </div>
                                                        <!--./form-group-->
                                                    </td>
                                                </tr>

                                                <tr>
                                                    <td><b>Level</b></td>
                                                    <td>
                                                        <div class="form-group mb-0">
                                                            <input type="text" name="level" id="level"
                                                                placeholder="Write level..." class="form-control" />
                                                        </div>
                                                        <!--./form-group-->
                                                    </td>
                                                </tr>

                                                <tr>
                                                    <td><b>Respondent Name</b></td>
                                                    <td>
                                                        <div class="form-group mb-0">
                                                            <input type="text" name="name" id="name"
                                                                placeholder="Write name of respondent..."
                                                                class="form-control" />
                                                        </div>
                                                        <!--./form-group-->
                                                    </td>
                                                </tr>

                                                <tr>
                                                    <td><b>Respondent Institution</b></td>
                                                    <td>
                                                        <div class="form-group mb-0">
                                                            <select name="country" id="country" class="form-control">
                                                                <option value="">--Select --</option>
                                                                {% for val in institutions %}
                                                                <option value="{{ val.id}}">
                                                                    {{ val.title}}
                                                                </option>
                                                                {% endfor %}
                                                            </select>
                                                        </div>
                                                        <!--./form-group-->
                                                    </td>
                                                </tr>

                                                <tr>
                                                    <td><b>Respondent Designation</b></td>
                                                    <td>
                                                        <div class="form-group mb-0">
                                                            <input type="text" name="designation" id="designation"
                                                                placeholder="Write respondent designation..."
                                                                class="form-control" />
                                                        </div>
                                                        <!--./form-group-->
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                        <!--./col-md-12-->
                                    </div>
                                    <!--./row-->

                                    <div class="row">
                                        <div class="col-md-12">
                                            <div id="accordion" class="myaccordion">
                                                {% for category in categories %}
                                                <div class="card">
                                                    <div class="card-header">
                                                        <a class="card-link" data-toggle="collapse"
                                                            href="#collapse_{{ category.id }}">
                                                            {{ category.code }}. {{ category.title }}
                                                        </a>
                                                    </div>
                                                    <!--./card-header-->
                                                    <div id="collapse_{{ category.id }}"
                                                        class="collapse {% if category.id == 1 %} show {% endif %}"
                                                        data-parent="#accordion">
                                                        <div class="card-body">
                                                            <table class="table table-bordered">
                                                                <thead>
                                                                    <tr valign="top">
                                                                        <th width="3%" valign="top">#</th>
                                                                        <th width="40%" valign="top">Question</th>
                                                                        <th width="10%" valign="top">Yes/No</th>
                                                                        <th width="40%" valign="top">Remarks</th>
                                                                    </tr>
                                                                </thead>

                                                                <tbody>
                                                                    {% for question in category.questions.all %}
                                                                    <input type="hidden" name="question_id"
                                                                        value="{{ question.id }}" />
                                                                    <tr>
                                                                        <td>{{ question.code }}</td>

                                                                        {% if question.has_sub == "YES" %}
                                                                        <td colspan="3" style="font-weight: 600;">{{ question.title }}</td>
                                                                        {% for sub_qn in question.sub_questions.all %}
                                                                        <input type="hidden" name="sub_question_id"
                                                                            value="{{ sub_qn.id }}" />
                                                                    <tr>
                                                                        <td>{{ sub_qn.code}}</td>
                                                                        <td>{{ sub_qn.title}}</td>
                                                                        <td>
                                                                            <div class="row">
                                                                                <div
                                                                                    class="col-lg-12 col-md-12 col-sm-12 col-12">
                                                                                    <div class="form-group mb-0">
                                                                                        {% if sub_qn.qn_type == "SELECT" %}
                                                                                        <select name="answer" id="answer"
                                                                                            class="form-control">
                                                                                            <option value="YES">Yes
                                                                                            </option>
                                                                                            <option value="NO">No
                                                                                            </option>
                                                                                            <option value="NA">Not
                                                                                                Applicable</option>
                                                                                        </select>
                                                                                        {% elif sub_qn.qn_type == "NUMBER" %}
                                                                                        <input type="number" name="answer"
                                                                                            id="answer"
                                                                                            class="form-control" />
                                                                                        {% elif sub_qn.qn_type == "TEXTAREA" %}
                                                                                        <textarea rows="4" cols="40"
                                                                                            name="answer"
                                                                                            class="textarea form-control"
                                                                                            id="answer"></textarea>
                                                                                        {% endif %}
                                                                                    </div>
                                                                                    <!--./form-group-->
                                                                                </div>
                                                                                <!--./col-->
                                                                            </div>
                                                                            <!--./row-->
                                                                        </td>
                                                                        <td>
                                                                            <div class="row">
                                                                                <div
                                                                                    class="col-lg-12 col-md-12 col-sm-12 col-12">
                                                                                    <div class="form-group mb-0">
                                                                                        <textarea rows="2" cols="40"
                                                                                            name="remarks"
                                                                                            class="form-control"
                                                                                            placeholder="Write remarks..."
                                                                                            id="remarks"></textarea>
                                                                                    </div>
                                                                                    <!--./form-group-->
                                                                                </div>
                                                                                <!--./col-->
                                                                            </div>
                                                                            <!--./row-->
                                                                        </td>
                                                                    </tr>
                                                                    {% endfor %}

                                                                    {% elif question.has_sub == "NO"  %}
                                                                    <td>{{ question.title }}</td>
                                                                    <td>
                                                                        <div class="row">
                                                                            <div
                                                                                class="col-lg-12 col-md-12 col-sm-12 col-12">
                                                                                <div class="form-group mb-0">
                                                                                    {% if question.qn_type == "SELECT" %}
                                                                                    <select name="answer" id="answer"
                                                                                        class="form-control">
                                                                                        <option value="YES">Yes
                                                                                        </option>
                                                                                        <option value="NO">No
                                                                                        </option>
                                                                                        <option value="NA">Not
                                                                                            Applicable</option>
                                                                                    </select>
                                                                                    {% elif question.qn_type == "NUMBER" %}
                                                                                    <input type="number" name="answer"
                                                                                        id="answer"
                                                                                        class="form-control" />
                                                                                    {% elif question.qn_type == "TEXTAREA" %}
                                                                                    <textarea rows="4" cols="40"
                                                                                        name="answer"
                                                                                        class="textarea form-control"
                                                                                        id="answer"></textarea>
                                                                                    {% endif %}
                                                                                </div>
                                                                                <!--./form-group-->
                                                                            </div>
                                                                            <!--./col-->
                                                                        </div>
                                                                        <!--./row-->
                                                                    </td>
                                                                    <td>
                                                                        <div class="row">
                                                                            <div
                                                                                class="col-lg-12 col-md-12 col-sm-12 col-12">
                                                                                <div class="form-group mb-0">
                                                                                    <textarea rows="2" cols="40"
                                                                                        name="remarks"
                                                                                        class="form-control"
                                                                                        placeholder="Write remarks..."
                                                                                        id="remarks"></textarea>
                                                                                </div>
                                                                                <!--./form-group-->
                                                                            </div>
                                                                            <!--./col-->
                                                                        </div>
                                                                        <!--./row-->
                                                                    </td>
                                                                    {% endif %}
                                                                    </tr>
                                                                    {% endfor %}
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                        <!--./card-body-->
                                                    </div>
                                                    <!--./collaple-->
                                                </div>
                                                <!--./card-->
                                                {% endfor %}
                                            </div>
                                            <!--./accordion-->
                                        </div>
                                        <!--./col-md-12-->
                                    </div>
                                    <!--./row-->

                                    <div class="row mt-3">
                                        <div class="col-md-12 col-12">
                                            <div class="float-left">
                                                <div class="form-group">
                                                    <input type="submit" class="btn btn-primary btn-xs"
                                                        value="Submit" />
                                                </div>
                                                <!--./form-group-->
                                            </div>
                                            <!--./pull-right -->
                                        </div>
                                        <!--./col-md-12 -->
                                    </div>
                                    <!--./row -->
                                </form>
                                {% else %}
                                <span>No questions</span>
                                {% endif %}
                            </div>
                            <!--./col-md-12 -->
                        </div>
                        <!--./row -->
                    </div>
                    <!--./card-body -->
                </div><!-- /basic card -->
            </div><!-- /content area -->
        </div><!-- /main content -->
    </div>
    <!--./container-->
</div><!-- /page content -->
{% endblock %}